package com.pluralsight.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;

import com.pluralsight.model.LogInDetails;

@Controller
@SessionAttributes("logInForm")
public class ItineraryController {
	
	@RequestMapping(value="itinerary", method=RequestMethod.GET)
	public String displayItinerary(@ModelAttribute("logInForm") LogInDetails logInForm) {
		
		System.out.println("makepayment - get");
		//check if user already logged in
		System.out.println(logInForm.isLoggedIn());
		if(logInForm == null || logInForm.isLoggedIn() == false) {
			System.out.println("Not logged in");
			return "redirect:signUp.html";
		}
		
		return "itinerary";
	}
	
	@ModelAttribute("logInForm")
	public LogInDetails getLogin() {
		System.out.println("loginform invoked makePayment");
		return new LogInDetails();
	}

}
